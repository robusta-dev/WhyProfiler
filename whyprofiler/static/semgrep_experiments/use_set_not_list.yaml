rules:
- id: use_set_not_list
  patterns:
    - pattern-not-inside: |
        ...
        ... = $X[...]
        ...
    - pattern-not-inside: |
        ...
        $X[...] = ...
        ...
    - pattern-not-inside: |
        ...
        ... = $X[...]
        ...
    - pattern-inside: |
        $X = list($INIT)
        ...
        for $Y in $Z:
            ...
            ... = <... ... in $X ...>
    - pattern: |
        for $Y in $Z:
  fix: |
        $X = set($INIT)
        for $Y in $Z:
  message: "use sets not lists"
  languages: [python]
  severity: ERROR


# - pattern: |
#            $X = ...
#            ...
#            if <... ... in $X ...>:
#            ...


#patterns:
#  - pattern-inside: |
#      $X = [$...ARGS]
#      ...
#      for $...LOOP:
#          ...
#          if $Y in $X:
#           ...
#  - pattern: $X = [$...ARGS]
#    fix: $X = {$...ARGS}